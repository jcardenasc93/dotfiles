# improve colors
set -g default-terminal 'xterm-256color'
set -a terminal-overrides ',xterm-256color:RGB'
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm' # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m' # underscore colours - needs tmux-3.0

# change prefix
# unbind C-b
set-option -g prefix C-b
#set -g @themepack 'basic'
# set -g @themepack 'powerline/default/green'

#set-option -g default-command "reattach-to-user-namespace -l zsh"
set-option -g status on
set-option -g status-position top

# automatically set window titles so you know what's going on
set-window-option -g automatic-rename on
set-option -g set-titles on

set -g status-interval 4

# Reload on focus
set -g focus-events on

# Set layout
bind -n M-d select-layout main-vertical

# renumber when window is closed
set -g renumber-window on


#############################
########## KEYMAPS #########
#############################
# Reload config
bind-key r source-file ~/.tmux.conf \; display-message "~/.tmux.conf reloaded"

# Pane window split defaults
bind V split-window -v -c "#{pane_current_path}"
bind v split-window -h -c "#{pane_current_path}"

# Kill pane
bind q killp

# Resize the current pane using Alt + direction
bind-key -r k resize-pane -U 7
bind-key -r j resize-pane -D 5
bind-key -r h resize-pane -L 5
bind-key -r l resize-pane -R 5

# Swap panes
bind -r C-o swap-pane -U
bind -r o swap-pane -D

# Toogle last window
bind b last-window

# Prev window
bind p previous-window


 #================================================
#                NORD THEME COLORS
# ================================================
# See: https://www.nordtheme.com/docs/colors-and-palettes
set -g @nord0  '#2E3440' # Polar Night
set -g @nord1  '#3B4252' # Polar Night
set -g @nord2  '#434C5E' # Polar Night
set -g @nord3  '#4C566A' # Polar Night
set -g @nord4  '#D8DEE9' # Snow Storm
set -g @nord5  '#E5E9F0' # Snow Storm
set -g @nord6  '#ECEFF4' # Snow Storm
set -g @nord7  '#8FBCBB' # Frost
set -g @nord8  '#88C0D0' # Frost
set -g @nord9  '#81A1C1' # Frost
set -g @nord10 '#5E81AC' # Frost
set -g @nord11 '#BF616A' # Aurora
set -g @nord12 '#D08770' # Aurora
set -g @nord13 '#EBCB8B' # Aurora
set -g @nord14 '#A3BE8C' # Aurora
set -g @nord15 '#B48EAD' # Aurora

# ================================================
#                 STATUS BAR STYLING
# ================================================
set-option -g status-fg '#ECEFF4' # fg (No idea why I can't use variables here)
set-option -g status-bg '#2E3440' # bg0

set-option -g mode-style fg='#{@nord14}',bg='#{@nord1}' # fg=purple, bg=bg_visual

# default statusbar colors
set-option -g status-style fg='#{@nord4}',bg='#{@nord2}',default # fg=fg bg=bg_dim

# ---- Windows ----
# default window title colors
set-window-option -g window-status-style fg='#{@nord6}',bg='#{@nord0}'

# default window with an activity alert
set-window-option -g window-status-activity-style 'bg=#{@nord1},fg=#{@nord2}'

# active window title colors
set-window-option -g window-status-current-style fg='#{nord5}',bg='#{@nord8}' # fg=fg bg=bg_green

# Msg bar
set -g message-style "fg=#{@nord7},bg=#{@nord3}"

# Mode style
set -g mode-style "fg=#{@nord7},bg=#{@nord3}"

# ===========================
# ---- Formatting ----
# ===========================

# ----- Left ----------
set-option -g status-left-style none
set -g status-left-length 60
set -g status-left '#[fg=#{@nord2},bg=#{@nord8},bold] #S #[fg=#{@nord15},bg=#{@nord0},nobold] '

set -g window-status-separator '#[fg=#{@nord12},bg=#{@nord14}] '
set -g window-status-format "#[fg=#{@nord9},bg=#{@nord1}] #W #[fg=#{@nord9},bg=#{@nord2}] #I "
set -g window-status-current-format "#[fg=#{@nord6},bg=#{@nord9}] #W #[fg=#{@nord6},bg=#{@nord10},bold] #I #[fg=#{@everforest_bg_dim},bg=#{@nord15},nobold]"


# --------- Right -------------------
set-option -g status-right-style none
set -g status-right-length 150
set -g status-right '#[fg=#{@nord7},bg=#{@nord0},bold]#[fg=#{@nord4},bg=#{@nord2},bold] #{network_bandwidth} '
# set-option -g status-right "#{network_bandwidth} "


# Tmux plugins
# set -g @plugin 'rose-pine/tmux'
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator' # vim-tmux integration
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'xamut/tmux-network-bandwidth'
# set -g @plugin "arcticicestudio/nord-tmux"
# set -g @plugin 'catppuccin/tmux#v2.1.0'
run '~/.tmux/plugins/tpm/tpm'
